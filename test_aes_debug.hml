import { generate_aes_key, generate_iv, aes_encrypt } from "@stdlib/crypto";

print("Step 1: Generating key");
let key = generate_aes_key();
print("Step 2: Key generated, length = " + typeof(key.length));

print("Step 3: Generating IV");
let iv = generate_iv();
print("Step 4: IV generated, length = " + typeof(iv.length));

print("Step 5: Creating plaintext");
let plaintext = "Hello, World!";
print("Step 6: Plaintext created: " + plaintext);

print("Step 7: About to call aes_encrypt");
try {
    let ciphertext = aes_encrypt(plaintext, key, iv);
    print("Step 8: Encryption succeeded");
    print("Ciphertext length: " + typeof(ciphertext.length));
} catch (e) {
    print("Step 8: Encryption failed: " + e);
}
