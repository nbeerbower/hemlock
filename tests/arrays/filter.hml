// Test filter() - keep elements that pass predicate

// Basic filter - even numbers
let nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
let evens = nums.filter(fn(x) {
    return x % 2 == 0;
});
print(evens[0]);  // 2
print(evens[1]);  // 4
print(evens[2]);  // 6
print(evens[3]);  // 8
print(evens[4]);  // 10
print(evens.length);  // 5

// Filter - odd numbers
let odds = nums.filter(fn(x) {
    return x % 2 == 1;
});
print(odds[0]);  // 1
print(odds[1]);  // 3
print(odds[2]);  // 5
print(odds[3]);  // 7
print(odds.length);  // 5

// Filter with empty array
let empty = [];
let empty_result = empty.filter(fn(x) {
    return x > 5;
});
print(empty_result.length);  // 0

// Filter that keeps nothing
let none = [1, 2, 3].filter(fn(x) {
    return x > 10;
});
print(none.length);  // 0

// Filter that keeps everything
let all = [1, 2, 3].filter(fn(x) {
    return x > 0;
});
print(all[0]);  // 1
print(all[1]);  // 2
print(all[2]);  // 3
print(all.length);  // 3

// Filter preserves original array
let original = [1, 2, 3, 4, 5];
let filtered = original.filter(fn(x) {
    return x > 3;
});
print(original.length);  // 5 (unchanged)
print(filtered.length);  // 2

// Filter with strings
let words = ["apple", "banana", "cherry", "date"];
let long_words = words.filter(fn(w) {
    return w.length > 5;
});
print(long_words[0]);  // banana
print(long_words[1]);  // cherry
print(long_words.length);  // 2

// Filter with closure
let threshold = 5;
let above_threshold = [1, 3, 5, 7, 9].filter(fn(x) {
    return x > threshold;
});
print(above_threshold[0]);  // 7
print(above_threshold[1]);  // 9
print(above_threshold.length);  // 2

// Truthy filter (non-bool return values)
let mixed = [1, 0, 2, null, 3];
let truthy = mixed.filter(fn(x) {
    return x;  // Returns the value itself (truthy check)
});
print(truthy[0]);  // 1
print(truthy[1]);  // 2
print(truthy[2]);  // 3
print(truthy.length);  // 3
